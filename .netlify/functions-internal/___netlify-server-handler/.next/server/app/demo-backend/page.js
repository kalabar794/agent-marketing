(()=>{var a={};a.id=9,a.ids=[9],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13567:(a,b,c)=>{Promise.resolve().then(c.bind(c,18006))},18006:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>aq});var d=c(60687),e=c(43210),f=c(12736),g="undefined"==typeof window||"Deno"in globalThis;function h(){}function i(a){return"number"==typeof a&&a>=0&&a!==1/0}function j(a,b){return Math.max(a+(b||0)-Date.now(),0)}function k(a,b){return"function"==typeof a?a(b):a}function l(a,b){return"function"==typeof a?a(b):a}function m(a,b){let{type:c="all",exact:d,fetchStatus:e,predicate:f,queryKey:g,stale:h}=a;if(g){if(d){if(b.queryHash!==o(g,b.options))return!1}else if(!q(b.queryKey,g))return!1}if("all"!==c){let a=b.isActive();if("active"===c&&!a||"inactive"===c&&a)return!1}return("boolean"!=typeof h||b.isStale()===h)&&(!e||e===b.state.fetchStatus)&&(!f||!!f(b))}function n(a,b){let{exact:c,status:d,predicate:e,mutationKey:f}=a;if(f){if(!b.options.mutationKey)return!1;if(c){if(p(b.options.mutationKey)!==p(f))return!1}else if(!q(b.options.mutationKey,f))return!1}return(!d||b.state.status===d)&&(!e||!!e(b))}function o(a,b){return(b?.queryKeyHashFn||p)(a)}function p(a){return JSON.stringify(a,(a,b)=>t(b)?Object.keys(b).sort().reduce((a,c)=>(a[c]=b[c],a),{}):b)}function q(a,b){return a===b||typeof a==typeof b&&!!a&&!!b&&"object"==typeof a&&"object"==typeof b&&Object.keys(b).every(c=>q(a[c],b[c]))}function r(a,b){if(!b||Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}function s(a){return Array.isArray(a)&&a.length===Object.keys(a).length}function t(a){if(!u(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!!u(c)&&!!c.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(a)===Object.prototype}function u(a){return"[object Object]"===Object.prototype.toString.call(a)}function v(a,b,c){return"function"==typeof c.structuralSharing?c.structuralSharing(a,b):!1!==c.structuralSharing?function a(b,c){if(b===c)return b;let d=s(b)&&s(c);if(d||t(b)&&t(c)){let e=d?b:Object.keys(b),f=e.length,g=d?c:Object.keys(c),h=g.length,i=d?[]:{},j=new Set(e),k=0;for(let e=0;e<h;e++){let f=d?e:g[e];(!d&&j.has(f)||d)&&void 0===b[f]&&void 0===c[f]?(i[f]=void 0,k++):(i[f]=a(b[f],c[f]),i[f]===b[f]&&void 0!==b[f]&&k++)}return f===h&&k===f?b:i}return c}(a,b):b}function w(a,b,c=0){let d=[...a,b];return c&&d.length>c?d.slice(1):d}function x(a,b,c=0){let d=[b,...a];return c&&d.length>c?d.slice(0,-1):d}var y=Symbol();function z(a,b){return!a.queryFn&&b?.initialPromise?()=>b.initialPromise:a.queryFn&&a.queryFn!==y?a.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${a.queryHash}'`))}function A(a,b){return"function"==typeof a?a(...b):!!a}var B=a=>setTimeout(a,0),C=function(){let a=[],b=0,c=a=>{a()},d=a=>{a()},e=B,f=d=>{b?a.push(d):e(()=>{c(d)})};return{batch:f=>{let g;b++;try{g=f()}finally{--b||(()=>{let b=a;a=[],b.length&&e(()=>{d(()=>{b.forEach(a=>{c(a)})})})})()}return g},batchCalls:a=>(...b)=>{f(()=>{a(...b)})},schedule:f,setNotifyFunction:a=>{c=a},setBatchNotifyFunction:a=>{d=a},setScheduler:a=>{e=a}}}(),D=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){return this.listeners.add(a),this.onSubscribe(),()=>{this.listeners.delete(a),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},E=new class extends D{#a;#b;#c;constructor(){super(),this.#c=a=>{if(!g&&window.addEventListener){let b=()=>a();return window.addEventListener("visibilitychange",b,!1),()=>{window.removeEventListener("visibilitychange",b)}}}}onSubscribe(){this.#b||this.setEventListener(this.#c)}onUnsubscribe(){this.hasListeners()||(this.#b?.(),this.#b=void 0)}setEventListener(a){this.#c=a,this.#b?.(),this.#b=a(a=>{"boolean"==typeof a?this.setFocused(a):this.onFocus()})}setFocused(a){this.#a!==a&&(this.#a=a,this.onFocus())}onFocus(){let a=this.isFocused();this.listeners.forEach(b=>{b(a)})}isFocused(){return"boolean"==typeof this.#a?this.#a:globalThis.document?.visibilityState!=="hidden"}},F=new class extends D{#d=!0;#b;#c;constructor(){super(),this.#c=a=>{if(!g&&window.addEventListener){let b=()=>a(!0),c=()=>a(!1);return window.addEventListener("online",b,!1),window.addEventListener("offline",c,!1),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",c)}}}}onSubscribe(){this.#b||this.setEventListener(this.#c)}onUnsubscribe(){this.hasListeners()||(this.#b?.(),this.#b=void 0)}setEventListener(a){this.#c=a,this.#b?.(),this.#b=a(this.setOnline.bind(this))}setOnline(a){this.#d!==a&&(this.#d=a,this.listeners.forEach(b=>{b(a)}))}isOnline(){return this.#d}};function G(){let a,b,c=new Promise((c,d)=>{a=c,b=d});function d(a){Object.assign(c,a),delete c.resolve,delete c.reject}return c.status="pending",c.catch(()=>{}),c.resolve=b=>{d({status:"fulfilled",value:b}),a(b)},c.reject=a=>{d({status:"rejected",reason:a}),b(a)},c}function H(a){return Math.min(1e3*2**a,3e4)}function I(a){return(a??"online")!=="online"||F.isOnline()}var J=class extends Error{constructor(a){super("CancelledError"),this.revert=a?.revert,this.silent=a?.silent}};function K(a){return a instanceof J}function L(a){let b,c=!1,d=0,e=!1,f=G(),h=()=>E.isFocused()&&("always"===a.networkMode||F.isOnline())&&a.canRun(),i=()=>I(a.networkMode)&&a.canRun(),j=c=>{e||(e=!0,a.onSuccess?.(c),b?.(),f.resolve(c))},k=c=>{e||(e=!0,a.onError?.(c),b?.(),f.reject(c))},l=()=>new Promise(c=>{b=a=>{(e||h())&&c(a)},a.onPause?.()}).then(()=>{b=void 0,e||a.onContinue?.()}),m=()=>{let b;if(e)return;let f=0===d?a.initialPromise:void 0;try{b=f??a.fn()}catch(a){b=Promise.reject(a)}Promise.resolve(b).then(j).catch(b=>{if(e)return;let f=a.retry??3*!g,i=a.retryDelay??H,j="function"==typeof i?i(d,b):i,n=!0===f||"number"==typeof f&&d<f||"function"==typeof f&&f(d,b);if(c||!n)return void k(b);d++,a.onFail?.(d,b),new Promise(a=>{setTimeout(a,j)}).then(()=>h()?void 0:l()).then(()=>{c?k(b):m()})})};return{promise:f,cancel:b=>{e||(k(new J(b)),a.abort?.())},continue:()=>(b?.(),f),cancelRetry:()=>{c=!0},continueRetry:()=>{c=!1},canStart:i,start:()=>(i()?m():l().then(m),f)}}var M=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),i(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(a){this.gcTime=Math.max(this.gcTime||0,a??(g?1/0:3e5))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},N=class extends M{#f;#g;#h;#i;#j;#k;#l;constructor(a){super(),this.#l=!1,this.#k=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.#i=a.client,this.#h=this.#i.getQueryCache(),this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.#f=function(a){let b="function"==typeof a.initialData?a.initialData():a.initialData,c=void 0!==b,d=c?"function"==typeof a.initialDataUpdatedAt?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:b,dataUpdateCount:0,dataUpdatedAt:c?d??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=a.state??this.#f,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#j?.promise}setOptions(a){this.options={...this.#k,...a},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#h.remove(this)}setData(a,b){let c=v(this.state.data,a,this.options);return this.#m({data:c,type:"success",dataUpdatedAt:b?.updatedAt,manual:b?.manual}),c}setState(a,b){this.#m({type:"setState",state:a,setStateOptions:b})}cancel(a){let b=this.#j?.promise;return this.#j?.cancel(a),b?b.then(h).catch(h):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#f)}isActive(){return this.observers.some(a=>!1!==l(a.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===y||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(a=>"static"===k(a.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(a=0){return void 0===this.state.data||"static"!==a&&(!!this.state.isInvalidated||!j(this.state.dataUpdatedAt,a))}onFocus(){let a=this.observers.find(a=>a.shouldFetchOnWindowFocus());a?.refetch({cancelRefetch:!1}),this.#j?.continue()}onOnline(){let a=this.observers.find(a=>a.shouldFetchOnReconnect());a?.refetch({cancelRefetch:!1}),this.#j?.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),this.#h.notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(b=>b!==a),this.observers.length||(this.#j&&(this.#l?this.#j.cancel({revert:!0}):this.#j.cancelRetry()),this.scheduleGc()),this.#h.notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#m({type:"invalidate"})}fetch(a,b){if("idle"!==this.state.fetchStatus){if(void 0!==this.state.data&&b?.cancelRefetch)this.cancel({silent:!0});else if(this.#j)return this.#j.continueRetry(),this.#j.promise}if(a&&this.setOptions(a),!this.options.queryFn){let a=this.observers.find(a=>a.options.queryFn);a&&this.setOptions(a.options)}let c=new AbortController,d=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#l=!0,c.signal)})},e=()=>{let a=z(this.options,b),c=(()=>{let a={client:this.#i,queryKey:this.queryKey,meta:this.meta};return d(a),a})();return(this.#l=!1,this.options.persister)?this.options.persister(a,c,this):a(c)},f=(()=>{let a={fetchOptions:b,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:e};return d(a),a})();this.options.behavior?.onFetch(f,this),this.#g=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#m({type:"fetch",meta:f.fetchOptions?.meta});let g=a=>{K(a)&&a.silent||this.#m({type:"error",error:a}),K(a)||(this.#h.config.onError?.(a,this),this.#h.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#j=L({initialPromise:b?.initialPromise,fn:f.fetchFn,abort:c.abort.bind(c),onSuccess:a=>{if(void 0===a)return void g(Error(`${this.queryHash} data is undefined`));try{this.setData(a)}catch(a){g(a);return}this.#h.config.onSuccess?.(a,this),this.#h.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:g,onFail:(a,b)=>{this.#m({type:"failed",failureCount:a,error:b})},onPause:()=>{this.#m({type:"pause"})},onContinue:()=>{this.#m({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0}),this.#j.start()}#m(a){let b=b=>{switch(a.type){case"failed":return{...b,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...b,fetchStatus:"paused"};case"continue":return{...b,fetchStatus:"fetching"};case"fetch":return{...b,...O(b.data,this.options),fetchMeta:a.meta??null};case"success":return this.#g=void 0,{...b,data:a.data,dataUpdateCount:b.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let c=a.error;if(K(c)&&c.revert&&this.#g)return{...this.#g,fetchStatus:"idle"};return{...b,error:c,errorUpdateCount:b.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:b.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...b,isInvalidated:!0};case"setState":return{...b,...a.state}}};this.state=b(this.state),C.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#h.notify({query:this,type:"updated",action:a})})}};function O(a,b){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:I(b.networkMode)?"fetching":"paused",...void 0===a&&{error:null,status:"pending"}}}var P=class extends D{constructor(a={}){super(),this.config=a,this.#n=new Map}#n;build(a,b,c){let d=b.queryKey,e=b.queryHash??o(d,b),f=this.get(e);return f||(f=new N({client:a,queryKey:d,queryHash:e,options:a.defaultQueryOptions(b),state:c,defaultOptions:a.getQueryDefaults(d)}),this.add(f)),f}add(a){this.#n.has(a.queryHash)||(this.#n.set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){let b=this.#n.get(a.queryHash);b&&(a.destroy(),b===a&&this.#n.delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){C.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return this.#n.get(a)}getAll(){return[...this.#n.values()]}find(a){let b={exact:!0,...a};return this.getAll().find(a=>m(b,a))}findAll(a={}){let b=this.getAll();return Object.keys(a).length>0?b.filter(b=>m(a,b)):b}notify(a){C.batch(()=>{this.listeners.forEach(b=>{b(a)})})}onFocus(){C.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){C.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},Q=class extends M{#o;#p;#j;constructor(a){super(),this.mutationId=a.mutationId,this.#p=a.mutationCache,this.#o=[],this.state=a.state||R(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){this.#o.includes(a)||(this.#o.push(a),this.clearGcTimeout(),this.#p.notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){this.#o=this.#o.filter(b=>b!==a),this.scheduleGc(),this.#p.notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){this.#o.length||("pending"===this.state.status?this.scheduleGc():this.#p.remove(this))}continue(){return this.#j?.continue()??this.execute(this.state.variables)}async execute(a){let b=()=>{this.#m({type:"continue"})};this.#j=L({fn:()=>this.options.mutationFn?this.options.mutationFn(a):Promise.reject(Error("No mutationFn found")),onFail:(a,b)=>{this.#m({type:"failed",failureCount:a,error:b})},onPause:()=>{this.#m({type:"pause"})},onContinue:b,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#p.canRun(this)});let c="pending"===this.state.status,d=!this.#j.canStart();try{if(c)b();else{this.#m({type:"pending",variables:a,isPaused:d}),await this.#p.config.onMutate?.(a,this);let b=await this.options.onMutate?.(a);b!==this.state.context&&this.#m({type:"pending",context:b,variables:a,isPaused:d})}let e=await this.#j.start();return await this.#p.config.onSuccess?.(e,a,this.state.context,this),await this.options.onSuccess?.(e,a,this.state.context),await this.#p.config.onSettled?.(e,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(e,null,a,this.state.context),this.#m({type:"success",data:e}),e}catch(b){try{throw await this.#p.config.onError?.(b,a,this.state.context,this),await this.options.onError?.(b,a,this.state.context),await this.#p.config.onSettled?.(void 0,b,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,b,a,this.state.context),b}finally{this.#m({type:"error",error:b})}}finally{this.#p.runNext(this)}}#m(a){this.state=(b=>{switch(a.type){case"failed":return{...b,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...b,isPaused:!0};case"continue":return{...b,isPaused:!1};case"pending":return{...b,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...b,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...b,data:void 0,error:a.error,failureCount:b.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}})(this.state),C.batch(()=>{this.#o.forEach(b=>{b.onMutationUpdate(a)}),this.#p.notify({mutation:this,type:"updated",action:a})})}};function R(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var S=class extends D{constructor(a={}){super(),this.config=a,this.#q=new Set,this.#r=new Map,this.#s=0}#q;#r;#s;build(a,b,c){let d=new Q({mutationCache:this,mutationId:++this.#s,options:a.defaultMutationOptions(b),state:c});return this.add(d),d}add(a){this.#q.add(a);let b=T(a);if("string"==typeof b){let c=this.#r.get(b);c?c.push(a):this.#r.set(b,[a])}this.notify({type:"added",mutation:a})}remove(a){if(this.#q.delete(a)){let b=T(a);if("string"==typeof b){let c=this.#r.get(b);if(c)if(c.length>1){let b=c.indexOf(a);-1!==b&&c.splice(b,1)}else c[0]===a&&this.#r.delete(b)}}this.notify({type:"removed",mutation:a})}canRun(a){let b=T(a);if("string"!=typeof b)return!0;{let c=this.#r.get(b),d=c?.find(a=>"pending"===a.state.status);return!d||d===a}}runNext(a){let b=T(a);if("string"!=typeof b)return Promise.resolve();{let c=this.#r.get(b)?.find(b=>b!==a&&b.state.isPaused);return c?.continue()??Promise.resolve()}}clear(){C.batch(()=>{this.#q.forEach(a=>{this.notify({type:"removed",mutation:a})}),this.#q.clear(),this.#r.clear()})}getAll(){return Array.from(this.#q)}find(a){let b={exact:!0,...a};return this.getAll().find(a=>n(b,a))}findAll(a={}){return this.getAll().filter(b=>n(a,b))}notify(a){C.batch(()=>{this.listeners.forEach(b=>{b(a)})})}resumePausedMutations(){let a=this.getAll().filter(a=>a.state.isPaused);return C.batch(()=>Promise.all(a.map(a=>a.continue().catch(h))))}};function T(a){return a.options.scope?.id}function U(a){return{onFetch:(b,c)=>{let d=b.options,e=b.fetchOptions?.meta?.fetchMore?.direction,f=b.state.data?.pages||[],g=b.state.data?.pageParams||[],h={pages:[],pageParams:[]},i=0,j=async()=>{let c=!1,j=z(b.options,b.fetchOptions),k=async(a,d,e)=>{if(c)return Promise.reject();if(null==d&&a.pages.length)return Promise.resolve(a);let f=(()=>{let a={client:b.client,queryKey:b.queryKey,pageParam:d,direction:e?"backward":"forward",meta:b.options.meta};return Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(b.signal.aborted?c=!0:b.signal.addEventListener("abort",()=>{c=!0}),b.signal)}),a})(),g=await j(f),{maxPages:h}=b.options,i=e?x:w;return{pages:i(a.pages,g,h),pageParams:i(a.pageParams,d,h)}};if(e&&f.length){let a="backward"===e,b={pages:f,pageParams:g},c=(a?function(a,{pages:b,pageParams:c}){return b.length>0?a.getPreviousPageParam?.(b[0],b,c[0],c):void 0}:V)(d,b);h=await k(b,c,a)}else{let b=a??f.length;do{let a=0===i?g[0]??d.initialPageParam:V(d,h);if(i>0&&null==a)break;h=await k(h,a),i++}while(i<b)}return h};b.options.persister?b.fetchFn=()=>b.options.persister?.(j,{client:b.client,queryKey:b.queryKey,meta:b.options.meta,signal:b.signal},c):b.fetchFn=j}}}function V(a,{pages:b,pageParams:c}){let d=b.length-1;return b.length>0?a.getNextPageParam(b[d],b,c[d],c):void 0}var W=class{#t;#p;#k;#u;#v;#w;#x;#y;constructor(a={}){this.#t=a.queryCache||new P,this.#p=a.mutationCache||new S,this.#k=a.defaultOptions||{},this.#u=new Map,this.#v=new Map,this.#w=0}mount(){this.#w++,1===this.#w&&(this.#x=E.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#y=F.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#w--,0===this.#w&&(this.#x?.(),this.#x=void 0,this.#y?.(),this.#y=void 0)}isFetching(a){return this.#t.findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return this.#p.findAll({...a,status:"pending"}).length}getQueryData(a){let b=this.defaultQueryOptions({queryKey:a});return this.#t.get(b.queryHash)?.state.data}ensureQueryData(a){let b=this.defaultQueryOptions(a),c=this.#t.build(this,b),d=c.state.data;return void 0===d?this.fetchQuery(a):(a.revalidateIfStale&&c.isStaleByTime(k(b.staleTime,c))&&this.prefetchQuery(b),Promise.resolve(d))}getQueriesData(a){return this.#t.findAll(a).map(({queryKey:a,state:b})=>[a,b.data])}setQueryData(a,b,c){let d=this.defaultQueryOptions({queryKey:a}),e=this.#t.get(d.queryHash),f=e?.state.data,g="function"==typeof b?b(f):b;if(void 0!==g)return this.#t.build(this,d).setData(g,{...c,manual:!0})}setQueriesData(a,b,c){return C.batch(()=>this.#t.findAll(a).map(({queryKey:a})=>[a,this.setQueryData(a,b,c)]))}getQueryState(a){let b=this.defaultQueryOptions({queryKey:a});return this.#t.get(b.queryHash)?.state}removeQueries(a){let b=this.#t;C.batch(()=>{b.findAll(a).forEach(a=>{b.remove(a)})})}resetQueries(a,b){let c=this.#t;return C.batch(()=>(c.findAll(a).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...a},b)))}cancelQueries(a,b={}){let c={revert:!0,...b};return Promise.all(C.batch(()=>this.#t.findAll(a).map(a=>a.cancel(c)))).then(h).catch(h)}invalidateQueries(a,b={}){return C.batch(()=>(this.#t.findAll(a).forEach(a=>{a.invalidate()}),a?.refetchType==="none")?Promise.resolve():this.refetchQueries({...a,type:a?.refetchType??a?.type??"active"},b))}refetchQueries(a,b={}){let c={...b,cancelRefetch:b.cancelRefetch??!0};return Promise.all(C.batch(()=>this.#t.findAll(a).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let b=a.fetch(void 0,c);return c.throwOnError||(b=b.catch(h)),"paused"===a.state.fetchStatus?Promise.resolve():b}))).then(h)}fetchQuery(a){let b=this.defaultQueryOptions(a);void 0===b.retry&&(b.retry=!1);let c=this.#t.build(this,b);return c.isStaleByTime(k(b.staleTime,c))?c.fetch(b):Promise.resolve(c.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(h).catch(h)}fetchInfiniteQuery(a){return a.behavior=U(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(h).catch(h)}ensureInfiniteQueryData(a){return a.behavior=U(a.pages),this.ensureQueryData(a)}resumePausedMutations(){return F.isOnline()?this.#p.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#p}getDefaultOptions(){return this.#k}setDefaultOptions(a){this.#k=a}setQueryDefaults(a,b){this.#u.set(p(a),{queryKey:a,defaultOptions:b})}getQueryDefaults(a){let b=[...this.#u.values()],c={};return b.forEach(b=>{q(a,b.queryKey)&&Object.assign(c,b.defaultOptions)}),c}setMutationDefaults(a,b){this.#v.set(p(a),{mutationKey:a,defaultOptions:b})}getMutationDefaults(a){let b=[...this.#v.values()],c={};return b.forEach(b=>{q(a,b.mutationKey)&&Object.assign(c,b.defaultOptions)}),c}defaultQueryOptions(a){if(a._defaulted)return a;let b={...this.#k.queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return b.queryHash||(b.queryHash=o(b.queryKey,b)),void 0===b.refetchOnReconnect&&(b.refetchOnReconnect="always"!==b.networkMode),void 0===b.throwOnError&&(b.throwOnError=!!b.suspense),!b.networkMode&&b.persister&&(b.networkMode="offlineFirst"),b.queryFn===y&&(b.enabled=!1),b}defaultMutationOptions(a){return a?._defaulted?a:{...this.#k.mutations,...a?.mutationKey&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){this.#t.clear(),this.#p.clear()}},X=e.createContext(void 0),Y=a=>{let b=e.useContext(X);if(a)return a;if(!b)throw Error("No QueryClient set, use QueryClientProvider to set one");return b},Z=({client:a,children:b})=>(e.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),(0,d.jsx)(X.Provider,{value:a,children:b}));function $({children:a}){let b=new W({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(a,b)=>a<3,retryDelay:a=>Math.min(1e3*2**a,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0},mutations:{retry:!1,networkMode:"online",onError:a=>{console.error("Mutation error:",a)}}}});return(0,d.jsx)(Z,{client:b,children:a})}var _=class extends D{constructor(a,b){super(),this.options=b,this.#i=a,this.#z=null,this.#A=G(),this.options.experimental_prefetchInRender||this.#A.reject(Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(b)}#i;#B=void 0;#C=void 0;#D=void 0;#E;#F;#A;#z;#G;#H;#I;#J;#K;#L;#M=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#B.addObserver(this),aa(this.#B,this.options)?this.#N():this.updateResult(),this.#O())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ab(this.#B,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ab(this.#B,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#P(),this.#Q(),this.#B.removeObserver(this)}setOptions(a){let b=this.options,c=this.#B;if(this.options=this.#i.defaultQueryOptions(a),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof l(this.options.enabled,this.#B))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#R(),this.#B.setOptions(this.options),b._defaulted&&!r(this.options,b)&&this.#i.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#B,observer:this});let d=this.hasListeners();d&&ac(this.#B,c,this.options,b)&&this.#N(),this.updateResult(),d&&(this.#B!==c||l(this.options.enabled,this.#B)!==l(b.enabled,this.#B)||k(this.options.staleTime,this.#B)!==k(b.staleTime,this.#B))&&this.#S();let e=this.#T();d&&(this.#B!==c||l(this.options.enabled,this.#B)!==l(b.enabled,this.#B)||e!==this.#L)&&this.#U(e)}getOptimisticResult(a){var b,c;let d=this.#i.getQueryCache().build(this.#i,a),e=this.createResult(d,a);return b=this,c=e,r(b.getCurrentResult(),c)||(this.#D=e,this.#F=this.options,this.#E=this.#B.state),e}getCurrentResult(){return this.#D}trackResult(a,b){return new Proxy(a,{get:(a,c)=>(this.trackProp(c),b?.(c),Reflect.get(a,c))})}trackProp(a){this.#M.add(a)}getCurrentQuery(){return this.#B}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){let b=this.#i.defaultQueryOptions(a),c=this.#i.getQueryCache().build(this.#i,b);return c.fetch().then(()=>this.createResult(c,b))}fetch(a){return this.#N({...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#D))}#N(a){this.#R();let b=this.#B.fetch(this.options,a);return a?.throwOnError||(b=b.catch(h)),b}#S(){this.#P();let a=k(this.options.staleTime,this.#B);if(g||this.#D.isStale||!i(a))return;let b=j(this.#D.dataUpdatedAt,a);this.#J=setTimeout(()=>{this.#D.isStale||this.updateResult()},b+1)}#T(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#B):this.options.refetchInterval)??!1}#U(a){this.#Q(),this.#L=a,!g&&!1!==l(this.options.enabled,this.#B)&&i(this.#L)&&0!==this.#L&&(this.#K=setInterval(()=>{(this.options.refetchIntervalInBackground||E.isFocused())&&this.#N()},this.#L))}#O(){this.#S(),this.#U(this.#T())}#P(){this.#J&&(clearTimeout(this.#J),this.#J=void 0)}#Q(){this.#K&&(clearInterval(this.#K),this.#K=void 0)}createResult(a,b){let c,d=this.#B,e=this.options,f=this.#D,g=this.#E,h=this.#F,i=a!==d?a.state:this.#C,{state:j}=a,k={...j},m=!1;if(b._optimisticResults){let c=this.hasListeners(),f=!c&&aa(a,b),g=c&&ac(a,d,b,e);(f||g)&&(k={...k,...O(j.data,a.options)}),"isRestoring"===b._optimisticResults&&(k.fetchStatus="idle")}let{error:n,errorUpdatedAt:o,status:p}=k;c=k.data;let q=!1;if(void 0!==b.placeholderData&&void 0===c&&"pending"===p){let a;f?.isPlaceholderData&&b.placeholderData===h?.placeholderData?(a=f.data,q=!0):a="function"==typeof b.placeholderData?b.placeholderData(this.#I?.state.data,this.#I):b.placeholderData,void 0!==a&&(p="success",c=v(f?.data,a,b),m=!0)}if(b.select&&void 0!==c&&!q)if(f&&c===g?.data&&b.select===this.#G)c=this.#H;else try{this.#G=b.select,c=b.select(c),c=v(f?.data,c,b),this.#H=c,this.#z=null}catch(a){this.#z=a}this.#z&&(n=this.#z,c=this.#H,o=Date.now(),p="error");let r="fetching"===k.fetchStatus,s="pending"===p,t="error"===p,u=s&&r,w=void 0!==c,x={status:p,fetchStatus:k.fetchStatus,isPending:s,isSuccess:"success"===p,isError:t,isInitialLoading:u,isLoading:u,data:c,dataUpdatedAt:k.dataUpdatedAt,error:n,errorUpdatedAt:o,failureCount:k.fetchFailureCount,failureReason:k.fetchFailureReason,errorUpdateCount:k.errorUpdateCount,isFetched:k.dataUpdateCount>0||k.errorUpdateCount>0,isFetchedAfterMount:k.dataUpdateCount>i.dataUpdateCount||k.errorUpdateCount>i.errorUpdateCount,isFetching:r,isRefetching:r&&!s,isLoadingError:t&&!w,isPaused:"paused"===k.fetchStatus,isPlaceholderData:m,isRefetchError:t&&w,isStale:ad(a,b),refetch:this.refetch,promise:this.#A,isEnabled:!1!==l(b.enabled,a)};if(this.options.experimental_prefetchInRender){let b=a=>{"error"===x.status?a.reject(x.error):void 0!==x.data&&a.resolve(x.data)},c=()=>{b(this.#A=x.promise=G())},e=this.#A;switch(e.status){case"pending":a.queryHash===d.queryHash&&b(e);break;case"fulfilled":("error"===x.status||x.data!==e.value)&&c();break;case"rejected":("error"!==x.status||x.error!==e.reason)&&c()}}return x}updateResult(){let a=this.#D,b=this.createResult(this.#B,this.options);if(this.#E=this.#B.state,this.#F=this.options,void 0!==this.#E.data&&(this.#I=this.#B),r(b,a))return;this.#D=b;let c=()=>{if(!a)return!0;let{notifyOnChangeProps:b}=this.options,c="function"==typeof b?b():b;if("all"===c||!c&&!this.#M.size)return!0;let d=new Set(c??this.#M);return this.options.throwOnError&&d.add("error"),Object.keys(this.#D).some(b=>this.#D[b]!==a[b]&&d.has(b))};this.#V({listeners:c()})}#R(){let a=this.#i.getQueryCache().build(this.#i,this.options);if(a===this.#B)return;let b=this.#B;this.#B=a,this.#C=a.state,this.hasListeners()&&(b?.removeObserver(this),a.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#O()}#V(a){C.batch(()=>{a.listeners&&this.listeners.forEach(a=>{a(this.#D)}),this.#i.getQueryCache().notify({query:this.#B,type:"observerResultsUpdated"})})}};function aa(a,b){return!1!==l(b.enabled,a)&&void 0===a.state.data&&("error"!==a.state.status||!1!==b.retryOnMount)||void 0!==a.state.data&&ab(a,b,b.refetchOnMount)}function ab(a,b,c){if(!1!==l(b.enabled,a)&&"static"!==k(b.staleTime,a)){let d="function"==typeof c?c(a):c;return"always"===d||!1!==d&&ad(a,b)}return!1}function ac(a,b,c,d){return(a!==b||!1===l(d.enabled,a))&&(!c.suspense||"error"!==a.state.status)&&ad(a,c)}function ad(a,b){return!1!==l(b.enabled,a)&&a.isStaleByTime(k(b.staleTime,a))}var ae=e.createContext(function(){let a=!1;return{clearReset:()=>{a=!1},reset:()=>{a=!0},isReset:()=>a}}()),af=e.createContext(!1);af.Provider;var ag=(a,b,c)=>b.fetchOptimistic(a).catch(()=>{c.clearReset()}),ah=class extends D{#i;#D=void 0;#W;#X;constructor(a,b){super(),this.#i=a,this.setOptions(b),this.bindMethods(),this.#Y()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#i.defaultMutationOptions(a),r(this.options,b)||this.#i.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#W,observer:this}),b?.mutationKey&&this.options.mutationKey&&p(b.mutationKey)!==p(this.options.mutationKey)?this.reset():this.#W?.state.status==="pending"&&this.#W.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#W?.removeObserver(this)}onMutationUpdate(a){this.#Y(),this.#V(a)}getCurrentResult(){return this.#D}reset(){this.#W?.removeObserver(this),this.#W=void 0,this.#Y(),this.#V()}mutate(a,b){return this.#X=b,this.#W?.removeObserver(this),this.#W=this.#i.getMutationCache().build(this.#i,this.options),this.#W.addObserver(this),this.#W.execute(a)}#Y(){let a=this.#W?.state??R();this.#D={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#V(a){C.batch(()=>{if(this.#X&&this.hasListeners()){let b=this.#D.variables,c=this.#D.context;a?.type==="success"?(this.#X.onSuccess?.(a.data,b,c),this.#X.onSettled?.(a.data,null,b,c)):a?.type==="error"&&(this.#X.onError?.(a.error,b,c),this.#X.onSettled?.(void 0,a.error,b,c))}this.listeners.forEach(a=>{a(this.#D)})})}};let ai=(a={})=>{let{maxConcurrent:b=3,enableQueue:c=!0,enableAnalytics:d=!0,defaultPriority:f="normal"}=a,[g,h]=(0,e.useState)({high:[],normal:[],low:[]}),[i,j]=(0,e.useState)([]),[k,l]=(0,e.useState)({totalAnimations:0,averageDuration:0,errorRate:0,performanceScore:100}),m=(0,e.useRef)({durations:[],errors:0,startTimes:new Map}),n=(0,e.useCallback)(()=>`anim_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,[]),o=(0,e.useCallback)((a,b,c=f,e)=>{let g=n(),i={id:g,type:a,status:"pending",message:b,priority:c,startTime:Date.now(),estimatedDuration:e};return h(a=>({...a,[c]:[...a[c],i]})),d&&m.current.startTimes.set(g,Date.now()),g},[n,f,d]),p=(0,e.useCallback)(a=>{if(h(b=>({high:b.high.filter(b=>b.id!==a),normal:b.normal.filter(b=>b.id!==a),low:b.low.filter(b=>b.id!==a)})),j(b=>b.filter(b=>b.id!==a)),d){let b=m.current.startTimes.get(a);if(b){let c=Date.now()-b;m.current.durations.push(c),m.current.startTimes.delete(a),l(a=>({totalAnimations:a.totalAnimations+1,averageDuration:m.current.durations.reduce((a,b)=>a+b,0)/m.current.durations.length,errorRate:m.current.errors/(a.totalAnimations+1)*100,performanceScore:Math.max(0,100-10*m.current.errors-Math.max(0,(c-2e3)/100))}))}}},[d]),q=(0,e.useCallback)((a,b)=>{j(c=>c.map(c=>c.id===a?{...c,status:"error",message:b||"Animation error"}:c)),d&&m.current.errors++},[d]),r=(0,e.useCallback)(()=>{c&&j(a=>{if(a.length>=b)return a;let c=b-a.length,d=[],e=["high","normal","low"];for(let a of e){let b=g[a].filter(a=>"pending"===a.status).slice(0,Math.max(0,c-d.length));if(d.push(...b.map(a=>({...a,status:"running"}))),d.length>=c)break}return d.length>0&&h(a=>{let b={...a};for(let a of e)b[a]=b[a].filter(a=>!d.some(b=>b.id===a.id));return b}),[...a,...d]})},[c,b,g]);(0,e.useEffect)(()=>{if(c){let a=setTimeout(r,10);return()=>clearTimeout(a)}},[c,r]);let s=(0,e.useCallback)((a,b,c)=>{if(a.isPending||a.isFetching){let d=o("query",b||"Loading data...",c);return{id:d,cleanup:()=>{a.isPending||a.isFetching||p(d)}}}return null},[o,p]),t=(0,e.useCallback)((a,b,c)=>{if(a.isPending){let d=o("mutation",b||"Saving changes...",c);return{id:d,cleanup:()=>{a.isPending||p(d)}}}return null},[o,p]),u=(0,e.useCallback)(()=>{let a=g.high.length+g.normal.length+g.low.length,b=i.length>0,c=i.find(a=>"high"===a.priority)||i[0];return{isAnimating:b,hasQueue:a>0,totalActive:i.length,totalQueued:a,primaryMessage:c?.message||"Working...",primaryType:c?.type||"custom",estimatedTimeRemaining:c?.estimatedDuration?Math.max(0,c.startTime+c.estimatedDuration-Date.now()):void 0}},[i,g]),v=(0,e.useCallback)(()=>{h({high:[],normal:[],low:[]}),j([]),m.current.startTimes.clear()},[]),w=(0,e.useCallback)(()=>{if(!d)return null;let{durations:a,errors:b}=m.current,c=a.length>0?a.reduce((a,b)=>a+b,0)/a.length:0;return{...k,recommendations:[...c>3e3?["Consider optimizing animation duration"]:[],...k.errorRate>10?["High error rate detected - check error handling"]:[],...i.length>2?["Multiple concurrent animations may impact performance"]:[]]}},[d,k,i.length]);return{activeAnimations:i,queue:g,metrics:k,addAnimation:o,removeAnimation:p,markError:q,clearAll:v,addQueryAnimation:s,addMutationAnimation:t,getCurrentState:u,getPerformanceInsights:w,isAnalyticsEnabled:d,isQueueEnabled:c,maxConcurrent:b}},aj=a=>{let b=ai(),c=(0,e.useRef)(null),{animation:d,...f}=a,{message:i="Loading data...",priority:j="normal",enableAnimation:k=!0,estimatedDuration:l}=d||{},m=function(a,b,c){let d=e.useContext(af),f=e.useContext(ae),i=Y(c),j=i.defaultQueryOptions(a);if(i.getDefaultOptions().queries?._experimental_beforeQuery?.(j),j._optimisticResults=d?"isRestoring":"optimistic",j.suspense){let a=a=>"static"===a?a:Math.max(a??1e3,1e3),b=j.staleTime;j.staleTime="function"==typeof b?(...c)=>a(b(...c)):a(b),"number"==typeof j.gcTime&&(j.gcTime=Math.max(j.gcTime,1e3))}(j.suspense||j.throwOnError||j.experimental_prefetchInRender)&&!f.isReset()&&(j.retryOnMount=!1),e.useEffect(()=>{f.clearReset()},[f]);let k=!i.getQueryCache().get(j.queryHash),[l]=e.useState(()=>new b(i,j)),m=l.getOptimisticResult(j),n=!d&&!1!==a.subscribed;if(e.useSyncExternalStore(e.useCallback(a=>{let b=n?l.subscribe(C.batchCalls(a)):h;return l.updateResult(),b},[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),e.useEffect(()=>{l.setOptions(j)},[j,l]),j?.suspense&&m.isPending)throw ag(j,l,f);if((({result:a,errorResetBoundary:b,throwOnError:c,query:d,suspense:e})=>a.isError&&!b.isReset()&&!a.isFetching&&d&&(e&&void 0===a.data||A(c,[a.error,d])))({result:m,errorResetBoundary:f,throwOnError:j.throwOnError,query:i.getQueryCache().get(j.queryHash),suspense:j.suspense}))throw m.error;if(i.getDefaultOptions().queries?._experimental_afterQuery?.(j,m),j.experimental_prefetchInRender&&!g&&m.isLoading&&m.isFetching&&!d){let a=k?ag(j,l,f):i.getQueryCache().get(j.queryHash)?.promise;a?.catch(h).finally(()=>{l.updateResult()})}return j.notifyOnChangeProps?m:l.trackResult(m)}(f,_,void 0);return(0,e.useEffect)(()=>{k&&((m.isPending||m.isFetching)&&!c.current?c.current=b.addAnimation("query",i,j,l):m.isPending||m.isFetching||!c.current||(b.removeAnimation(c.current),c.current=null),m.isError&&c.current&&b.markError(c.current,m.error?.message))},[m.isPending,m.isFetching,m.isError,m.error?.message,k,i,j,l,b]),(0,e.useEffect)(()=>()=>{c.current&&b.removeAnimation(c.current)},[b]),{...m,animationId:c.current,isAnimating:!!c.current}},ak=a=>{let b=ai(),c=(0,e.useRef)(null),{animation:d,...f}=a,{message:g="Saving changes...",priority:i="high",enableAnimation:j=!0,estimatedDuration:k}=d||{},l=function(a,b){let c=Y(void 0),[d]=e.useState(()=>new ah(c,a));e.useEffect(()=>{d.setOptions(a)},[d,a]);let f=e.useSyncExternalStore(e.useCallback(a=>d.subscribe(C.batchCalls(a)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),g=e.useCallback((a,b)=>{d.mutate(a,b).catch(h)},[d]);if(f.error&&A(d.options.throwOnError,[f.error]))throw f.error;return{...f,mutate:g,mutateAsync:f.mutate}}({...f,onMutate:async a=>(j&&(c.current=b.addAnimation("mutation",g,i,k)),f.onMutate?.(a)),onSuccess:(a,d,e)=>{c.current&&(b.removeAnimation(c.current),c.current=null),f.onSuccess?.(a,d,e)},onError:(a,d,e)=>{c.current&&(b.markError(c.current,a?.message),setTimeout(()=>{c.current&&(b.removeAnimation(c.current),c.current=null)},3e3)),f.onError?.(a,d,e)}});return(0,e.useEffect)(()=>()=>{c.current&&b.removeAnimation(c.current)},[b]),{...l,animationId:c.current,isAnimating:!!c.current}},al=(a=2e3,b=!1)=>new Promise((c,d)=>{setTimeout(()=>{b?d(Error("Mock API error for testing")):c({data:"Mock data loaded successfully",timestamp:Date.now()})},a)}),am=a=>new Promise((b,c)=>{setTimeout(()=>{Math.random()>.8?c(Error("Save failed - please retry")):b({...a,id:Math.random().toString(36),saved:!0})},1500)});function an(){let[a,b]=(0,e.useState)("Initial data"),[c,g]=(0,e.useState)(!1),h=aj({queryKey:["demo-data"],queryFn:()=>al(3e3,c),animation:{message:"Loading demo data...",priority:"high",estimatedDuration:3e3}}),i=ak({mutationFn:a=>am({content:a}),animation:{message:"Saving your changes...",priority:"high",estimatedDuration:1500},onSuccess:a=>{console.log("Save successful:",a),b(a.content)}}),j=(a=>{let{optimisticUpdate:b,revertUpdate:c,animation:d,...e}=a;return ak({...e,animation:{message:"Updating...",priority:"high",...d},onMutate:async a=>(b?.(a),e.onMutate?.(a)),onError:(a,b,d)=>{c?.(a,b),e.onError?.(a,b,d)}})})({mutationFn:a=>am({content:a}),animation:{message:"Optimistically updating...",priority:"normal"},optimisticUpdate:a=>{b(a+" (optimistic)")},revertUpdate:(a,c)=>{b(c)},onSuccess:a=>{b(a.content)}}),k=(a=>{let{syncInterval:b=3e4,enableBackgroundSync:c=!0,animation:d,...e}=a,f=aj({...e,animation:{message:"Syncing...",priority:"low",...d},refetchInterval:!!c&&b,refetchIntervalInBackground:!0});return{...f,isSyncing:f.isFetching&&!f.isPending,lastSyncTime:f.dataUpdatedAt}})({queryKey:["background-sync"],queryFn:()=>al(500),syncInterval:1e4,enableBackgroundSync:!0,animation:{message:"Syncing in background...",priority:"low"}});return(0,d.jsxs)("div",{className:"space-y-8","data-testid":"integration-tab",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6","data-testid":"tanstack-section",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"TanStack Query Integration"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Animated Query"}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(f.A,{queryState:h,type:"detailed",size:"sm",showOnlyInViewport:!0,enablePerformanceMode:!0})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("button",{onClick:()=>h.refetch(),disabled:h.isPending,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50",children:"Refetch Data"}),(0,d.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"checkbox",checked:c,onChange:a=>g(a.target.checked)}),(0,d.jsx)("span",{className:"text-sm",children:"Simulate error"})]})]}),(0,d.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Status: ",h.isPending?"Loading":h.isError?"Error":"Success"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Animated Mutation"}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(f.A,{mutationState:i,type:"minimal",showOnlyInViewport:!0})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("input",{type:"text",value:a,onChange:a=>b(a.target.value),className:"w-full px-3 py-2 border rounded",placeholder:"Edit data to save..."}),(0,d.jsx)("button",{onClick:()=>i.mutate(a),disabled:i.isPending,className:"px-4 py-2 bg-green-500 text-white rounded disabled:opacity-50",children:"Save Changes"})]}),(0,d.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Status: ",i.isPending?"Saving":i.isError?"Failed":"Ready"]})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Optimistic Updates"}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(f.A,{mutationState:j,type:"creative",size:"sm",enablePerformanceMode:!0})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("input",{type:"text",value:a,onChange:a=>b(a.target.value),className:"w-full px-3 py-2 border rounded",placeholder:"Type to see optimistic updates..."}),(0,d.jsx)("button",{onClick:()=>j.mutate(a),disabled:j.isPending,className:"px-4 py-2 bg-purple-500 text-white rounded disabled:opacity-50",children:"Save with Optimistic Update"})]}),(0,d.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:[(0,d.jsx)("strong",{children:"Current Data:"})," ",a]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Background Sync"}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(f.A,{queryState:k,type:"minimal",showOnlyInViewport:!0,priority:"low"})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Sync Status"}),(0,d.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,d.jsxs)("div",{children:["Is Syncing: ",k.isSyncing?"Yes":"No"]}),(0,d.jsxs)("div",{children:["Last Sync: ",k.lastSyncTime?new Date(k.lastSyncTime).toLocaleTimeString():"Never"]}),(0,d.jsxs)("div",{children:["Data Updated: ",k.dataUpdatedAt?new Date(k.dataUpdatedAt).toLocaleTimeString():"Never"]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Manual Controls"}),(0,d.jsx)("button",{onClick:()=>k.refetch(),className:"px-4 py-2 bg-indigo-500 text-white rounded",children:"Force Sync Now"})]})]})]})]})}function ao(){let a=ai({maxConcurrent:3,enableQueue:!0,enableAnalytics:!0}),b=(()=>{let a=ai({enableAnalytics:!0}),b=a.getPerformanceInsights(),c=a.getCurrentState();return{insights:b,currentState:c,activeCount:c.totalActive,queuedCount:c.totalQueued,isPerformant:!b||b.performanceScore>80,recommendations:b?.recommendations||[]}})(),c=a.getCurrentState(),e=b=>{let c=a.addAnimation("custom",`Custom ${b} priority task`,b,3e3*Math.random()+1e3);setTimeout(()=>{a.removeAnimation(c)},3e3*Math.random()+1e3)};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Global Animation State Manager"}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsx)(f.A,{isWorking:c.isAnimating,type:"creative",message:c.primaryMessage,size:"md",enablePerformanceMode:!0})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,d.jsx)("button",{onClick:()=>e("high"),className:"px-4 py-2 bg-red-500 text-white rounded",children:"Add High Priority"}),(0,d.jsx)("button",{onClick:()=>e("normal"),className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Add Normal Priority"}),(0,d.jsx)("button",{onClick:()=>e("low"),className:"px-4 py-2 bg-gray-500 text-white rounded",children:"Add Low Priority"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Current State"}),(0,d.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,d.jsxs)("div",{children:["Active: ",c.totalActive]}),(0,d.jsxs)("div",{children:["Queued: ",c.totalQueued]}),(0,d.jsxs)("div",{children:["Is Animating: ",c.isAnimating?"Yes":"No"]}),(0,d.jsxs)("div",{children:["Primary Type: ",c.primaryType]}),c.estimatedTimeRemaining&&(0,d.jsxs)("div",{children:["ETA: ",Math.round(c.estimatedTimeRemaining/1e3),"s"]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Queue Status"}),(0,d.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,d.jsxs)("div",{children:["High Priority: ",a.queue.high.length]}),(0,d.jsxs)("div",{children:["Normal Priority: ",a.queue.normal.length]}),(0,d.jsxs)("div",{children:["Low Priority: ",a.queue.low.length]})]})]})]}),(0,d.jsx)("button",{onClick:a.clearAll,className:"mt-4 px-4 py-2 bg-gray-600 text-white rounded",children:"Clear All Animations"})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Performance Analytics"}),b.insights&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Metrics"}),(0,d.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,d.jsxs)("div",{children:["Total Animations: ",b.insights.totalAnimations]}),(0,d.jsxs)("div",{children:["Average Duration: ",Math.round(b.insights.averageDuration),"ms"]}),(0,d.jsxs)("div",{children:["Error Rate: ",b.insights.errorRate.toFixed(1),"%"]}),(0,d.jsxs)("div",{children:["Performance Score: ",Math.round(b.insights.performanceScore),"/100"]})]}),(0,d.jsxs)("div",{className:"mt-3",children:[(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:`h-2 rounded-full transition-all duration-300 ${b.insights.performanceScore>80?"bg-green-500":b.insights.performanceScore>60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${b.insights.performanceScore}%`}})}),(0,d.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Performance Score"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-medium mb-2",children:"Recommendations"}),b.recommendations.length>0?(0,d.jsx)("ul",{className:"space-y-1 text-sm text-gray-600",children:b.recommendations.map((a,b)=>(0,d.jsxs)("li",{children:["• ",a]},b))}):(0,d.jsx)("p",{className:"text-sm text-green-600",children:"✓ Performance is optimal"})]})]})]})]})}function ap(){let[a]=(0,e.useState)(Array.from({length:20},(a,b)=>b));return(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Viewport Optimization Demo"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"Scroll to see animations only trigger when in viewport (intersection observer)"}),(0,d.jsx)("div",{className:"space-y-8",children:a.map(a=>(0,d.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,d.jsxs)("h4",{className:"font-medium mb-2",children:["Animation Item #",a+1]}),(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsx)(f.A,{isWorking:!0,type:a%3==0?"creative":a%2==0?"detailed":"minimal",size:"sm",showOnlyInViewport:!0,triggerOnce:!0,rootMargin:"100px",enablePerformanceMode:!0,message:`Loading item ${a+1}...`})}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"This animation only runs when visible in the viewport"})]},a))})]})}function aq(){let[a,b]=(0,e.useState)("integration");return(0,d.jsx)($,{children:(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-8",children:(0,d.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,d.jsxs)("div",{className:"text-center mb-8",children:[(0,d.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Backend Integration & Performance Demo"}),(0,d.jsx)("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Advanced animations with TanStack Query integration, intersection observer optimization, global state management, and performance analytics."})]}),(0,d.jsx)("div",{className:"flex justify-center mb-8",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg p-1 shadow-lg",children:[(0,d.jsx)("button",{onClick:()=>b("integration"),className:`px-6 py-2 rounded-md font-medium transition-colors ${"integration"===a?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Backend Integration"}),(0,d.jsx)("button",{onClick:()=>b("state"),className:`px-6 py-2 rounded-md font-medium transition-colors ${"state"===a?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Animation State"}),(0,d.jsx)("button",{onClick:()=>b("viewport"),className:`px-6 py-2 rounded-md font-medium transition-colors ${"viewport"===a?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Viewport Optimization"})]})}),(0,d.jsxs)(e.Suspense,{fallback:(0,d.jsx)("div",{className:"flex justify-center py-12",children:(0,d.jsx)(f.A,{isWorking:!0,type:"creative",message:"Loading demo content..."})}),children:["integration"===a&&(0,d.jsx)(an,{}),"state"===a&&(0,d.jsx)(ao,{}),"viewport"===a&&(0,d.jsx)(ap,{})]}),(0,d.jsxs)("div",{className:"mt-12 bg-white rounded-xl shadow-lg p-8",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"\uD83D\uDE80 New Features Implemented"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDD04 TanStack Query Integration"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"• Automatic query state animations"}),(0,d.jsx)("li",{children:"• Mutation progress indicators"}),(0,d.jsx)("li",{children:"• Background refetch animations"}),(0,d.jsx)("li",{children:"• Error state handling"})]})]}),(0,d.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDC41️ Viewport Optimization"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"• Intersection Observer integration"}),(0,d.jsx)("li",{children:"• Animations only when visible"}),(0,d.jsx)("li",{children:"• Configurable trigger behavior"}),(0,d.jsx)("li",{children:"• Performance-optimized rendering"})]})]}),(0,d.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83C\uDF9B️ Global State Management"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"• Animation queuing system"}),(0,d.jsx)("li",{children:"• Priority-based processing"}),(0,d.jsx)("li",{children:"• Concurrent animation limits"}),(0,d.jsx)("li",{children:"• Global state coordination"})]})]}),(0,d.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"⚡ Performance Optimization"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"• CSS containment strategy"}),(0,d.jsx)("li",{children:"• will-change optimization"}),(0,d.jsx)("li",{children:"• Animation metrics tracking"}),(0,d.jsx)("li",{children:"• Performance recommendations"})]})]}),(0,d.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDD04 Optimistic Updates"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"• Immediate UI feedback"}),(0,d.jsx)("li",{children:"• Automatic rollback on error"}),(0,d.jsx)("li",{children:"• Seamless state transitions"}),(0,d.jsx)("li",{children:"• Enhanced user experience"})]})]}),(0,d.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDCCA Analytics & Monitoring"}),(0,d.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,d.jsx)("li",{children:"• Animation duration tracking"}),(0,d.jsx)("li",{children:"• Error rate monitoring"}),(0,d.jsx)("li",{children:"• Performance scoring"}),(0,d.jsx)("li",{children:"• Usage recommendations"})]})]})]})]})]})})})}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23289:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jonathonc/Auto1111/claude/marketing-agent-v2/agentic-marketing-generator/src/app/demo-backend/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jonathonc/Auto1111/claude/marketing-agent-v2/agentic-marketing-generator/src/app/demo-backend/page.tsx","default")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},83303:(a,b,c)=>{Promise.resolve().then(c.bind(c,23289))},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91065:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(26713),u=c(43365),v=c(71454),w=c(67778),x=c(46143),y=c(39105),z=c(38171),A=c(86439),B=c(16133),C=c.n(B),D=c(30893),E=c(52836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["demo-backend",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,23289)),"/Users/jonathonc/Auto1111/claude/marketing-agent-v2/agentic-marketing-generator/src/app/demo-backend/page.tsx"]}]},{metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,94431)),"/Users/jonathonc/Auto1111/claude/marketing-agent-v2/agentic-marketing-generator/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,16133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,80849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,29868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,79615,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,H=["/Users/jonathonc/Auto1111/claude/marketing-agent-v2/agentic-marketing-generator/src/app/demo-backend/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/demo-backend/page",pathname:"/demo-backend",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/demo-backend/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[985,297,576,77,293],()=>b(b.s=91065));module.exports=c})();